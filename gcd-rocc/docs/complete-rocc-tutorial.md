# Chipyard RoCC „Ç¢„ÇØ„Çª„É©„É¨„Éº„ÇøÈñãÁô∫ ÂÆåÂÖ®„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´

ÂàùÂøÉËÄÖ„Åå‰∏Ä„Åã„ÇâÁã¨Ëá™„ÅÆRoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„Çí‰ΩúÊàê„Åó„ÄÅÊÄßËÉΩÊ∏¨ÂÆö„Åæ„ÅßË°å„Åà„ÇãÂÆåÂÖ®„Ç¨„Ç§„Éâ

---

## üìã ÁõÆÊ¨°

1. [„ÅØ„Åò„ÇÅ„Å´](#„ÅØ„Åò„ÇÅ„Å´)
2. [Áí∞Â¢ÉÊßãÁØâ](#Áí∞Â¢ÉÊßãÁØâ)
3. [RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂü∫Á§éÁü•Ë≠ò](#rocc„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂü∫Á§éÁü•Ë≠ò)
4. [GCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂÆüË£Ö](#gcd„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂÆüË£Ö)
5. [„ÉÜ„Çπ„Éà„Éó„É≠„Ç∞„É©„É†„ÅÆ‰ΩúÊàê](#„ÉÜ„Çπ„Éà„Éó„É≠„Ç∞„É©„É†„ÅÆ‰ΩúÊàê)
6. [„Éì„É´„Éâ„Å®„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥](#„Éì„É´„Éâ„Å®„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥)
7. [ÊÄßËÉΩÊ∏¨ÂÆö„Å®ÊØîËºÉ](#ÊÄßËÉΩÊ∏¨ÂÆö„Å®ÊØîËºÉ)
8. [„Éà„É©„Éñ„É´„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞](#„Éà„É©„Éñ„É´„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞)
9. [Áô∫Â±ïÁöÑ„Å™ÂÜÖÂÆπ](#Áô∫Â±ïÁöÑ„Å™ÂÜÖÂÆπ)

---

## „ÅØ„Åò„ÇÅ„Å´

### „Åì„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅßÂ≠¶„Åπ„Çã„Åì„Å®
- Chipyard„Åß„Ç´„Çπ„Çø„É†RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„Çí‰ΩúÊàê„Åô„ÇãÊñπÊ≥ï
- Chisel HDL„Åß„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢Ë®≠Ë®à
- „Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Éª„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂçîË™øË®≠Ë®à
- ÊÄßËÉΩÊ∏¨ÂÆö„Å®ÊúÄÈÅ©Âåñ„ÅÆÊâãÊ≥ï

### ÂøÖË¶Å„Å™ÂâçÊèêÁü•Ë≠ò
- Âü∫Êú¨ÁöÑ„Å™LinuxÊìç‰Ωú
- CË®ÄË™û„ÅÆÂü∫Á§é
- „Éá„Ç∏„Çø„É´ÂõûË∑Ø„ÅÆÂü∫Á§éÔºàÊé®Â•®Ôºâ

---

## Áí∞Â¢ÉÊßãÁØâ

### 1. Chipyard „ÅÆ„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó

```bash
# ‰ΩúÊ•≠„Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê
mkdir ~/chipyard-work
cd ~/chipyard-work

# Chipyard „Çí„ÇØ„É≠„Éº„É≥
git clone https://github.com/ucb-bar/chipyard.git
cd chipyard

# ÂàùÊúü„Çª„ÉÉ„Éà„Ç¢„ÉÉ„ÉóÔºàÊôÇÈñì„Åå„Åã„Åã„Çä„Åæ„Åô: 1-3ÊôÇÈñìÔºâ
./build-setup.sh riscv-tools
```

### 2. Áí∞Â¢ÉÂ§âÊï∞„ÅÆË®≠ÂÆö

```bash
# ~/.bashrc „Å´ËøΩÂä†„Åô„Çã„Åì„Å®„ÇíÊé®Â•®
cd ~/chipyard-work/chipyard
source /home/$USER/miniconda3/etc/profile.d/conda.sh  # conda„ÅÆ„Éë„Çπ„Å´Âêà„Çè„Åõ„Å¶Ë™øÊï¥
source env.sh
```

### 3. Áí∞Â¢ÉÁ¢∫Ë™ç

```bash
# RISC-V „ÉÑ„Éº„É´„ÉÅ„Çß„Éº„É≥„ÅÆÁ¢∫Ë™ç
which riscv64-unknown-elf-gcc
riscv64-unknown-elf-gcc --version

# ÊúüÂæÖ„Åï„Çå„ÇãÂá∫Âäõ
# riscv64-unknown-elf-gcc (g2ee5e430018) 12.2.0
```

---

## RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂü∫Á§éÁü•Ë≠ò

### RoCC (Rocket Custom Coprocessor) „Å®„ÅØ

RoCC„ÅØ„ÄÅRocket CPU„Å´ÂØÜÁµêÂêà„Åï„Çå„Åü„Ç´„Çπ„Çø„É†„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„Åß„Åô„ÄÇ

```
[Rocket CPU Core]
    ‚Üì „Ç´„Çπ„Çø„É†ÂëΩ‰ª§
[RoCC Interface]
    ‚Üì
[Your Accelerator]
```

### RoCC„ÅÆÁâπÂæ¥
- **‰Ωé„É¨„Ç§„ÉÜ„É≥„Ç∑**: CPU„Å®ÂØÜÁµêÂêà
- **„É¨„Ç∏„Çπ„Çø„Ç¢„ÇØ„Çª„Çπ**: CPU„É¨„Ç∏„Çπ„Çø„ÇíÁõ¥Êé•Ë™≠„ÅøÊõ∏„Åç
- **„Ç´„Çπ„Çø„É†ÂëΩ‰ª§**: RISC-V„ÅÆCUSTOM_0„ÄúCUSTOM_3„Ç™„Éö„Ç≥„Éº„Éâ‰ΩøÁî®

---

## GCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂÆüË£Ö

### „Çπ„ÉÜ„ÉÉ„Éó1: „Éó„É≠„Ç∏„Çß„ÇØ„Éà„Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê

```bash
cd ~/chipyard-work/chipyard
mkdir -p generators/gcd-rocc/src/main/scala
```

### „Çπ„ÉÜ„ÉÉ„Éó2: build.sbt „ÅÆ‰ΩúÊàê

`generators/gcd-rocc/build.sbt`:

```scala
name := "gcd-rocc"

organization := "edu.berkeley.cs"

version := "1.0-SNAPSHOT"

scalaVersion := "2.13.10"

resolvers ++= Seq(
  Resolver.sonatypeRepo("snapshots"),
  Resolver.sonatypeRepo("releases"),
  Resolver.mavenLocal
)

// ÈáçË¶Å: Chipyard„Å®Âêå„ÅòChisel„Éê„Éº„Ç∏„Éß„É≥„Çí‰ΩøÁî®
val chiselVersion = "3.6.0"

libraryDependencies ++= Seq(
  "edu.berkeley.cs" %% "chisel3" % chiselVersion,
  "edu.berkeley.cs" %% "rocketchip" % "1.6.0"
)

addCompilerPlugin("edu.berkeley.cs" % "chisel3-plugin" % chiselVersion cross CrossVersion.full)
```

### „Çπ„ÉÜ„ÉÉ„Éó3: GCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂÆüË£Ö

`generators/gcd-rocc/src/main/scala/GCDRoCC.scala`:

```scala
package gcdrocc

import chisel3._
import chisel3.util._
import org.chipsalliance.cde.config._
import freechips.rocketchip.subsystem._
import freechips.rocketchip.diplomacy._
import freechips.rocketchip.rocket._
import freechips.rocketchip.tilelink._
import freechips.rocketchip.tile._

// „Ç´„Çπ„Çø„É†ÂëΩ‰ª§ÂÆöÁæ©
object GCDInstr {
  val START = 0.U  // GCDË®àÁÆóÈñãÂßã
  val READ  = 1.U  // ÁµêÊûúË™≠„ÅøÂá∫„Åó
}

// GCD RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„ÇøÊú¨‰Ωì
class GCDRoCC(opcodes: OpcodeSet)(implicit p: Parameters) extends LazyRoCC(opcodes) {
  override lazy val module = new GCDRoCCModuleImp(this)
}

class GCDRoCCModuleImp(outer: GCDRoCC)(implicit p: Parameters) extends LazyRoCCModuleImp(outer) {
  
  // Áä∂ÊÖãÊ©üÊ¢∞„ÅÆÂÆöÁæ©
  val s_idle :: s_compute :: s_done :: Nil = Enum(3)
  val state = RegInit(s_idle)
  
  // GCDË®àÁÆóÁî®„É¨„Ç∏„Çπ„Çø
  val a = Reg(UInt(64.W))
  val b = Reg(UInt(64.W))
  val result = Reg(UInt(64.W))
  
  // „Ç≥„Éû„É≥„Éâ„Ç≠„É•„ÉºÔºàRoCC„Ç≥„Éû„É≥„Éâ„Çí„Éê„ÉÉ„Éï„Ç°„É™„É≥„Ç∞Ôºâ
  val cmd = Queue(io.cmd)
  
  // „Éá„Éï„Ç©„É´„ÉàÂá∫ÂäõË®≠ÂÆö
  io.resp.valid := false.B
  io.resp.bits := DontCare
  io.busy := state =/= s_idle
  io.interrupt := false.B
  cmd.ready := false.B
  
  // „É°„Ç§„É≥Áä∂ÊÖãÊ©üÊ¢∞
  switch(state) {
    is(s_idle) {
      when(cmd.valid) {
        switch(cmd.bits.inst.funct) {
          is(GCDInstr.START) {
            // GCDË®àÁÆóÈñãÂßã
            a := cmd.bits.rs1
            b := cmd.bits.rs2
            state := s_compute
            cmd.ready := true.B
            printf("GCD RoCC: Starting computation with a=%d, b=%d\n", cmd.bits.rs1, cmd.bits.rs2)
          }
          is(GCDInstr.READ) {
            // ÁµêÊûú„ÇíËøî„Åô
            io.resp.valid := true.B
            io.resp.bits.rd := cmd.bits.inst.rd
            io.resp.bits.data := result
            cmd.ready := true.B
            printf("GCD RoCC: Reading result=%d\n", result)
          }
        }
      }
    }
    
    is(s_compute) {
      // „É¶„Éº„ÇØ„É™„ÉÉ„Éâ‰∫íÈô§Ê≥ïÔºàÂºï„ÅçÁÆó„Éô„Éº„ÇπÔºâ
      when(b === 0.U) {
        result := a
        state := s_done
        printf("GCD RoCC: Computation complete, result=%d\n", a)
      } .elsewhen(a > b) {
        a := a - b
      } .otherwise {
        b := b - a
      }
    }
    
    is(s_done) {
      state := s_idle
    }
  }
  
  // „É°„É¢„É™„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ - ÊòéÁ§∫ÁöÑÂàùÊúüÂåñÔºàÈáçË¶ÅÔºâ
  io.mem.req.valid := false.B
  io.mem.req.bits.addr := 0.U
  io.mem.req.bits.tag := 0.U
  io.mem.req.bits.cmd := 0.U
  io.mem.req.bits.size := 0.U
  io.mem.req.bits.signed := false.B
  io.mem.req.bits.dprv := 0.U
  io.mem.req.bits.dv := false.B
  io.mem.req.bits.phys := false.B
  io.mem.req.bits.no_alloc := false.B
  io.mem.req.bits.no_xcpt := false.B
  io.mem.req.bits.data := 0.U
  io.mem.req.bits.mask := 0.U
  
  io.mem.s1_kill := false.B
  io.mem.s1_data.data := 0.U
  io.mem.s1_data.mask := 0.U
  io.mem.s2_kill := false.B
  io.mem.keep_clock_enabled := false.B
  
  // PTW interface - ÊòéÁ§∫ÁöÑÂàùÊúüÂåñ
  io.ptw.foreach { ptw =>
    ptw.req.valid := false.B
    ptw.req.bits := DontCare
  }
  
  // FPU interface - ÊòéÁ§∫ÁöÑÂàùÊúüÂåñ
  io.fpu_req.valid := false.B
  io.fpu_req.bits := DontCare
}
```

### „Çπ„ÉÜ„ÉÉ„Éó4: „Éì„É´„Éâ„Ç∑„Çπ„ÉÜ„É†„Å∏„ÅÆÁµ±Âêà

#### 4.1 „É°„Ç§„É≥build.sbt„ÅÆÊõ¥Êñ∞

`build.sbt` (Chipyard„ÅÆ„É´„Éº„Éà):

```scala
// Êó¢Â≠ò„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÆöÁæ©„ÅÆÂæå„Å´ËøΩÂä†
lazy val gcd_rocc = (project in file("generators/gcd-rocc"))
  .dependsOn(rocketchip)
  .settings(libraryDependencies ++= rocketLibDeps.value)
  .settings(commonSettings)

// chipyard„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„Å´ËøΩÂä†
lazy val chipyard = (project in file("generators/chipyard"))
  .dependsOn(testchipip, rocketchip, boom, hwacha, rocketchip_blocks, rocketchip_inclusive_cache, iocell,
    sha3, dsptools, rocket_dsp_utils,
    gemmini, icenet, tracegen, cva6, nvdla, sodor, ibex, fft_generator,
    constellation, mempress, barf, shuttle, caliptra_aes, gcd_rocc) // ‚Üê gcd_rocc„ÇíËøΩÂä†
```

#### 4.2 Ë®≠ÂÆö„ÇØ„É©„Çπ„ÅÆ‰ΩúÊàê

`generators/chipyard/src/main/scala/config/RoCCAcceleratorConfigs.scala` „Å´ËøΩÂä†:

```scala
// „Éï„Ç°„Ç§„É´„ÅÆÊúÄÂæå„Å´ËøΩÂä†
// GCD RoCC Configuration
class WithGCDRoCC extends Config((site, here, up) => {
  case BuildRoCC => up(BuildRoCC) ++ Seq(
    (p: Parameters) => {
      val gcd = LazyModule(new gcdrocc.GCDRoCC(OpcodeSet.custom0)(p))
      gcd
    })
})

class GCDRoCCRocketConfig extends Config(
  new WithGCDRoCC ++                                              // use GCD RoCC accelerator
  new freechips.rocketchip.subsystem.WithNBigCores(1) ++
  new chipyard.config.AbstractConfig)
```

---

## „ÉÜ„Çπ„Éà„Éó„É≠„Ç∞„É©„É†„ÅÆ‰ΩúÊàê

### „Çπ„ÉÜ„ÉÉ„Éó1: Âü∫Êú¨„ÉÜ„Çπ„Éà„Éó„É≠„Ç∞„É©„É†

`tests/gcd-rocc.c`:

```c
#include "rocc.h"
#include <stdio.h>

// GCD RoCCÂëΩ‰ª§„Éû„ÇØ„É≠
#define GCD_START 0
#define GCD_READ  1

// „Éò„É´„Éë„ÉºÈñ¢Êï∞
static inline void gcd_start(unsigned long a, unsigned long b)
{
    ROCC_INSTRUCTION_SS(0, a, b, GCD_START);
}

static inline unsigned long gcd_read()
{
    unsigned long result;
    ROCC_INSTRUCTION_D(0, result, GCD_READ);
    return result;
}

// „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂèÇÁÖßÂÆüË£Ö
unsigned long gcd_ref(unsigned long a, unsigned long b) {
    while (b != 0) {
        if (a > b) {
            a = a - b;
        } else {
            b = b - a;
        }
    }
    return a;
}

int main(void)
{
    printf("=== GCD RoCC „Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÉÜ„Çπ„Éà ===\n");
    
    // „ÉÜ„Çπ„Éà„Ç±„Éº„Çπ
    unsigned long test_cases[][2] = {
        {48, 18},
        {1071, 462},
        {12345, 6789}
    };
    
    for (int i = 0; i < 3; i++) {
        unsigned long a = test_cases[i][0];
        unsigned long b = test_cases[i][1];
        unsigned long expected = gcd_ref(a, b);
        
        printf("Test %d: gcd(%lu, %lu)\n", i+1, a, b);
        
        // „Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÂÆüË°å
        gcd_start(a, b);
        unsigned long result = gcd_read();
        
        printf("  ÊúüÂæÖÂÄ§: %lu\n", expected);
        printf("  ÁµêÊûú: %lu\n", result);
        
        if (result == expected) {
            printf("  ‚úì PASS\n");
        } else {
            printf("  ‚úó FAIL\n");
            return 1;
        }
    }
    
    printf("\nÂÖ®„ÉÜ„Çπ„ÉàÂêàÊ†ºÔºÅ\n");
    return 0;
}
```

### „Çπ„ÉÜ„ÉÉ„Éó2: ÊÄßËÉΩÊ∏¨ÂÆö„Éó„É≠„Ç∞„É©„É†

`tests/gcd-benchmark.c`:

```c
#include "rocc.h"
#include <stdio.h>

// GCD RoCCÂëΩ‰ª§„Éû„ÇØ„É≠
#define GCD_START 0
#define GCD_READ  1

static inline void gcd_start(unsigned long a, unsigned long b)
{
    ROCC_INSTRUCTION_SS(0, a, b, GCD_START);
}

static inline unsigned long gcd_read()
{
    unsigned long result;
    ROCC_INSTRUCTION_D(0, result, GCD_READ);
    return result;
}

// „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂÆüË£ÖÔºàÂêå„Åò„Ç¢„É´„Ç¥„É™„Ç∫„É†Ôºâ
unsigned long gcd_ref(unsigned long a, unsigned long b) {
    while (b != 0) {
        if (a > b) {
            a = a - b;
        } else {
            b = b - a;
        }
    }
    return a;
}

// È´òÈÄü„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂÆüË£ÖÔºàÂâ∞‰Ωô„Éô„Éº„ÇπÔºâ
unsigned long gcd_fast(unsigned long a, unsigned long b) {
    while (b != 0) {
        unsigned long temp = a % b;
        a = b;
        b = temp;
    }
    return a;
}

// RISC-V „Çµ„Ç§„ÇØ„É´„Ç´„Ç¶„É≥„Çø
static inline unsigned long read_cycles() {
    unsigned long cycles;
    asm volatile ("rdcycle %0" : "=r" (cycles));
    return cycles;
}

int main(void)
{
    printf("===== GCD „Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø ÊÄßËÉΩ„Éô„É≥„ÉÅ„Éû„Éº„ÇØ =====\n\n");
    printf("ÊØîËºÉÊñπÊ≥ï: Âêå‰∏ÄCPU‰∏ä„Åß„Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÂÆüË°å„Å®„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂÆüË°å„ÇíÊ∏¨ÂÆö\n\n");
    
    // „ÉÜ„Çπ„Éà„Ç±„Éº„Çπ
    unsigned long test_cases[][2] = {
        {48, 18},
        {1071, 462}, 
        {12345, 6789},
        {999999, 123456}
    };
    const char* descriptions[] = {
        "Â∞è„Åï„Å™Êï∞ÂÄ§",
        "‰∏≠Á®ãÂ∫¶„ÅÆÊï∞ÂÄ§", 
        "‰∏ÄËà¨ÁöÑ„Å™„Çµ„Ç§„Ç∫",
        "Â§ß„Åç„Å™Êï∞ÂÄ§"
    };
    
    printf("%-15s %-12s %-12s | %-8s %-8s %-8s | %-8s\n", 
           "„Ç±„Éº„Çπ", "a", "b", "HW", "SWÂêå„Åò", "SWÈ´òÈÄü", "HWÂäπÊûú");
    printf("--------------------------------------------------------------------\n");
    
    for (int i = 0; i < 4; i++) {
        unsigned long a = test_cases[i][0];
        unsigned long b = test_cases[i][1];
        
        // „Éè„Éº„Éâ„Ç¶„Çß„Ç¢Ê∏¨ÂÆöÔºàRoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø‰ΩøÁî®Ôºâ
        unsigned long hw_start = read_cycles();
        gcd_start(a, b);
        unsigned long hw_result = gcd_read();
        unsigned long hw_cycles = read_cycles() - hw_start;
        
        // „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢Ê∏¨ÂÆöÔºàCPU‰∏ä„ÅßÂÆüË°åÔºâ
        unsigned long sw_start = read_cycles();
        unsigned long sw_result = gcd_ref(a, b);
        unsigned long sw_cycles = read_cycles() - sw_start;
        
        // È´òÈÄü„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢Ê∏¨ÂÆö
        unsigned long fast_start = read_cycles();
        unsigned long fast_result = gcd_fast(a, b);
        unsigned long fast_cycles = read_cycles() - fast_start;
        
        // ÁµêÊûúÁ¢∫Ë™ç
        if (hw_result != sw_result || sw_result != fast_result) {
            printf("ERROR: ÁµêÊûú‰∏ç‰∏ÄËá¥!\n");
            continue;
        }
        
        // „Çπ„Éî„Éº„Éâ„Ç¢„ÉÉ„ÉóË®àÁÆó
        unsigned long speedup_x10 = (sw_cycles * 10) / hw_cycles;
        
        printf("%-15s %-12lu %-12lu | %-8lu %-8lu %-8lu | %lu.%luxÈÄü„ÅÑ\n",
               descriptions[i], a, b, 
               hw_cycles, sw_cycles, fast_cycles, 
               speedup_x10 / 10, speedup_x10 % 10);
    }
    
    printf("--------------------------------------------------------------------\n");
    printf("\nÊ∏¨ÂÆö„ÅÆ„Éù„Ç§„É≥„Éà:\n");
    printf("- ÂÖ®„Å¶Âêå„ÅòRocket CPU‰∏ä„ÅßÂÆüË°åÔºàÂÖ¨Âπ≥„Å™ÊØîËºÉÔºâ\n");
    printf("- HW: RoCCÂëΩ‰ª§„ÅßGCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„Çí‰ΩøÁî®\n");
    printf("- SW: ÈÄöÂ∏∏„ÅÆCÈñ¢Êï∞„ÅßCPUÔºàALUÔºâ„Çí‰ΩøÁî®\n");
    printf("- rdcycleÂëΩ‰ª§„ÅßÈ´òÁ≤æÂ∫¶Ê∏¨ÂÆöÔºà1„Çµ„Ç§„ÇØ„É´Âçò‰ΩçÔºâ\n");
    
    return 0;
}
```

### „Çπ„ÉÜ„ÉÉ„Éó3: Makefile„ÅÆÊõ¥Êñ∞

`tests/Makefile` „ÅÆPROGRAMS„É™„Çπ„Éà„Å´ËøΩÂä†:

```makefile
PROGRAMS = pwm blkdev accum charcount nic-loopback big-blkdev pingd \
           streaming-passthrough streaming-fir nvdla spiflashread spiflashwrite fft gcd \
           hello mt-hello symmetric gcd-rocc gcd-benchmark
```

---

## „Éì„É´„Éâ„Å®„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥

### „Çπ„ÉÜ„ÉÉ„Éó1: RTLÁîüÊàê

```bash
cd ~/chipyard-work/chipyard
source /home/$USER/miniconda3/etc/profile.d/conda.sh
source env.sh

cd sims/verilator
make CONFIG=GCDRoCCRocketConfig
```

**Ê≥®ÊÑè**: ÂàùÂõû„Éì„É´„Éâ„ÅØ30ÂàÜ„Äú2ÊôÇÈñì„Åã„Åã„Çä„Åæ„Åô„ÄÇ

### „Çπ„ÉÜ„ÉÉ„Éó2: „ÉÜ„Çπ„Éà„Éó„É≠„Ç∞„É©„É†„ÅÆ„Éì„É´„Éâ

```bash
cd ~/chipyard-work/chipyard/tests
make gcd-rocc.riscv gcd-benchmark.riscv
```

### „Çπ„ÉÜ„ÉÉ„Éó3: „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å

#### Âü∫Êú¨„ÉÜ„Çπ„Éà
```bash
cd ~/chipyard-work/chipyard/sims/verilator
./simulator-chipyard.harness-GCDRoCCRocketConfig ../../tests/gcd-rocc.riscv
```

ÊúüÂæÖ„Åï„Çå„ÇãÂá∫Âäõ:
```
=== GCD RoCC „Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÉÜ„Çπ„Éà ===
Test 1: gcd(48, 18)
  ÊúüÂæÖÂÄ§: 6
  ÁµêÊûú: 6
  ‚úì PASS
...
```

#### ÊÄßËÉΩÊ∏¨ÂÆö
```bash
./simulator-chipyard.harness-GCDRoCCRocketConfig ../../tests/gcd-benchmark.riscv
```

ÊúüÂæÖ„Åï„Çå„ÇãÂá∫Âäõ:
```
===== GCD „Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø ÊÄßËÉΩ„Éô„É≥„ÉÅ„Éû„Éº„ÇØ =====

„Ç±„Éº„Çπ       a            b            | HW       SWÂêå„Åò SWÈ´òÈÄü | HWÂäπÊûú
--------------------------------------------------------------------
Â∞è„Åï„Å™Êï∞ÂÄ§   48           18           | 4        25       33       | 6.2xÈÄü„ÅÑ
‰∏≠Á®ãÂ∫¶„ÅÆÊï∞ÂÄ§ 1071         462          | 4        60       33       | 15.0xÈÄü„ÅÑ
‰∏ÄËà¨ÁöÑ„Å™„Çµ„Ç§„Ç∫ 12345       6789         | 4        194      84       | 48.5xÈÄü„ÅÑ
Â§ß„Åç„Å™Êï∞ÂÄ§   999999       123456       | 4        804      90       | 201.0xÈÄü„ÅÑ
```

---

## ÊÄßËÉΩÊ∏¨ÂÆö„Å®ÊØîËºÉ

### ÊØîËºÉ„ÅÆ‰ªïÁµÑ„Åø

```
[1„Å§„ÅÆGCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø‰ªò„ÅçRocket Core]
‚îú‚îÄ‚îÄ CPUÂÆüË°å„É¶„Éã„ÉÉ„Éà
‚îÇ   ‚îî‚îÄ‚îÄ „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢GCDÂÆüË°åÔºàÈÄöÂ∏∏„ÅÆÂëΩ‰ª§Ôºâ
‚îî‚îÄ‚îÄ RoCC„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ
    ‚îî‚îÄ‚îÄ GCD„Ç¢„ÇØ„Çª„É©„É¨„Éº„ÇøÔºà„Ç´„Çπ„Çø„É†ÂëΩ‰ª§Ôºâ
```

### Ê∏¨ÂÆöÊñπÊ≥ï„ÅÆË©≥Á¥∞

1. **Âêå‰∏ÄCPU‰∏ä„ÅßÂÆüË°å**: ÂÖ¨Âπ≥„Å™ÊØîËºÉ„ÅÆ„Åü„ÇÅ
2. **rdcycleÂëΩ‰ª§**: RISC-V„ÅÆÊ®ôÊ∫ñ„Çµ„Ç§„ÇØ„É´„Ç´„Ç¶„É≥„Çø
3. **ÈÄ£Á∂öÂÆüË°å**: „Ç≠„É£„ÉÉ„Ç∑„É•Áä∂ÊÖã„ÇíÁµ±‰∏Ä

### ÊÄßËÉΩÂàÜÊûê„ÅÆ„Éù„Ç§„É≥„Éà

- **„Éè„Éº„Éâ„Ç¶„Çß„Ç¢**: Êï∞ÂÄ§„Çµ„Ç§„Ç∫„Å´Èñ¢‰øÇ„Å™„ÅèÂõ∫ÂÆö„Çµ„Ç§„ÇØ„É´Êï∞Ôºà4„Çµ„Ç§„ÇØ„É´Ôºâ
- **„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢**: Êï∞ÂÄ§„ÅåÂ§ß„Åç„ÅÑ„Åª„Å©ÂÆüË°åÊôÇÈñì„ÅåÂ¢óÂä†
- **„Çπ„Éî„Éº„Éâ„Ç¢„ÉÉ„Éó**: Â§ß„Åç„Å™Êï∞ÂÄ§„Åª„Å©ÂäπÊûúÂ§ßÔºàÊúÄÂ§ß201ÂÄçÔºâ

---

## „Éà„É©„Éñ„É´„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞

### „Çà„Åè„ÅÇ„Çã„Ç®„É©„Éº„Å®Ëß£Ê±∫Ê≥ï

#### 1. Chisel„Éê„Éº„Ç∏„Éß„É≥„Ç®„É©„Éº
```
Error downloading org.chipsalliance:chisel-stdlib_2.13:5.1.0
```

**Ëß£Ê±∫Ê≥ï**: build.sbt„ÅßChipyard„Å®Âêå„Åò„Éê„Éº„Ç∏„Éß„É≥Ôºà3.6.0Ôºâ„Çí‰ΩøÁî®

#### 2. Áí∞Â¢ÉÂ§âÊï∞„Ç®„É©„Éº
```
riscv64-unknown-elf-gcc: command not found
```

**Ëß£Ê±∫Ê≥ï**:
```bash
source /home/$USER/miniconda3/etc/profile.d/conda.sh
source env.sh
```

#### 3. Âæ™Áí∞‰æùÂ≠ò„Ç®„É©„Éº
```
Error: package chipyard.config not found
```

**Ëß£Ê±∫Ê≥ï**: Ë®≠ÂÆö„ÇØ„É©„Çπ„ÅØchipyard„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÜÖ„Å´ÈÖçÁΩÆ

#### 4. Verilator„Éà„É¨„Éº„Çπ„Ç®„É©„Éº
```
error: 'vlTOPp' was not declared in this scope
```

**Ëß£Ê±∫Ê≥ï**: „É°„É¢„É™„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„ÇíÊòéÁ§∫ÁöÑ„Å´ÂàùÊúüÂåñÔºàDontCare„ÇíÈÅø„Åë„ÇãÔºâ

---

## Áô∫Â±ïÁöÑ„Å™ÂÜÖÂÆπ

### 1. „Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÊã°Âºµ

#### „É°„É¢„É™„Ç¢„ÇØ„Çª„ÇπÊ©üËÉΩ
```scala
class GCDWithMemory extends LazyRoCC {
  // „É°„É¢„É™„Åã„ÇâÊï∞ÂÄ§„ÇíË™≠„ÅøËæº„Çì„ÅßGCDË®àÁÆó
  // ÁµêÊûú„Çí„É°„É¢„É™„Å´Êõ∏„ÅçÊàª„Åó
}
```

#### ‰∏¶ÂàóÂá¶ÁêÜ
```scala
class ParallelGCD(numUnits: Int) extends LazyRoCC {
  // Ë§áÊï∞„ÅÆGCD„ÇíÂêåÊôÇË®àÁÆó
}
```

### 2. ‰ªñ„ÅÆ„Ç¢„É´„Ç¥„É™„Ç∫„É†ÂÆüË£Ö

- **FFT**: ‰ø°Âè∑Âá¶ÁêÜÂêë„Åë
- **Ë°åÂàó‰πóÁÆó**: AI/MLÂêë„Åë
- **ÊöóÂè∑Âåñ**: „Çª„Ç≠„É•„É™„ÉÜ„Ç£Âêë„Åë

### 3. FPGAÂÆüË£Ö

```bash
cd fpga
make CONFIG=GCDRoCCRocketConfig bitstream
```

### 4. VLSIË®≠Ë®à

```bash
cd vlsi
make CONFIG=GCDRoCCRocketConfig tech=sky130
```

---

## „Åæ„Å®„ÇÅ

### Â≠¶Áøí„Åó„ÅüÂÜÖÂÆπ
- ‚úÖ RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆ‰ΩúÊàêÊñπÊ≥ï
- ‚úÖ Chisel HDL„Åß„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢Ë®≠Ë®à
- ‚úÖ „Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Éª„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÂçîË™øË®≠Ë®à
- ‚úÖ ÊÄßËÉΩÊ∏¨ÂÆö„Å®ÊúÄÈÅ©Âåñ

### ÈáçË¶Å„Å™„Éù„Ç§„É≥„Éà
1. **„Éê„Éº„Ç∏„Éß„É≥Êï¥ÂêàÊÄß**: Chipyard„Å®Âêå„ÅòChisel„Éê„Éº„Ç∏„Éß„É≥„Çí‰ΩøÁî®
2. **ÊòéÁ§∫ÁöÑÂàùÊúüÂåñ**: Verilator‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ
3. **Âêå‰∏ÄCPUÊØîËºÉ**: ÂÖ¨Âπ≥„Å™ÊÄßËÉΩÊ∏¨ÂÆö„ÅÆ„Åü„ÇÅ
4. **ÊÆµÈöéÁöÑÈñãÁô∫**: Â∞è„Åï„ÅèÂßã„ÇÅ„Å¶Âæê„ÄÖ„Å´Êã°Âºµ

### Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó
- „Çà„ÇäË§áÈõë„Å™„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø„ÅÆÂÆüË£Ö
- ÂÆüÈöõ„ÅÆFPGA„Éú„Éº„Éâ„Åß„ÅÆÂãï‰ΩúÁ¢∫Ë™ç
- Áî£Ê•≠„É¨„Éô„É´„ÅÆÊúÄÈÅ©ÂåñÊäÄË°ì„ÅÆÂ≠¶Áøí

---

**‰ΩúÊàêÊó•**: 2025Âπ¥6Êúà5Êó•  
**ÂØæË±°**: ChipyardÂàùÂøÉËÄÖ„Äú‰∏≠Á¥öËÄÖ  
**ÂâçÊèê**: LinuxÂü∫Á§é„ÄÅCË®ÄË™ûÂü∫Á§é  
**ÊàêÊûú**: ÊúÄÂ§ß201ÂÄç„ÅÆÊÄßËÉΩÂêë‰∏ä„ÇíÂÆüÁèæ„Åô„ÇãGCD RoCC„Ç¢„ÇØ„Çª„É©„É¨„Éº„Çø